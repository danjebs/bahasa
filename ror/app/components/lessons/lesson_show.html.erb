<main id="<%= dom_id @lesson %>" class="container mx-auto">
  <div class="mx-auto">
    <% if helpers.notice.present? %>
      <p class="py-2 px-3 bg-green-50 mb-5 text-green-500 font-medium rounded-lg inline-block" id="notice">
        <%= helpers.notice %>
      </p>
    <% end %>

    <%= render LinkButton.new(
        href: lessons_path,
        color: :white,
        size: :sm
      )
    %>

    <div class="flex justify-between items-center w-full py-4">
      <div>
        <div class="text-lg font-medium text-gray-400 dark:text-gray-500">
          <%= "Lesson ##{@lesson.position}" %>
        </div>
        <h1>
          <%= @lesson.title %>
        </h1>
      </div>
      <div>
        <%= render LinkButton.new(
            href: edit_lesson_path(@lesson),
            icon: "edit",
            color: :white,
            size: :sm,
            data: { turbo_frame: :remote_modal }
          )
        %>
      </div>
    </div>

    <%= render UI::Layout::TabBar.new(tabs: ["lesson", "practice"]) do |component| %>
      <% component.with_section do %>
        <turbo-frame
          id="exercises_list_frame"
          data-controller="reorderable"
          data-reorderable-url="<%= exercise_path(':id') %>"
        >
          <%= render Exercises::ExerciseDetails.with_collection(@lesson.exercises.ordered) %>
        </turbo-frame>
        <%= render Lessons::AddExerciseButtons.new lesson: @lesson %>
      <% end %>
      <% component.with_section do %>
        <%= render Cards::Translations::TranslationCardNew.new(lesson_id: @lesson.id) %>
        <div class="border border-solid border-gray-100 dark:border-gray-700 rounded-lg">
          <turbo-frame
            id="<%= dom_id(@lesson) %>_cards_list_frame"
            data-controller="reorderable"
            data-reorderable-url="<%= card_path(':id') %>"
          >
            <%= render Cards::CardListing.with_collection(@lesson.cards.ordered) %>
          </turbo-frame>
        </div>
      <% end %>
    <% end %>
  </div>
</main>
